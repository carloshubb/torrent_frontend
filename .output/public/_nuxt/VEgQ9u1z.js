import{a as o}from"./Hg7DAF47.js";const r="https://api.1331.com.1331x.com/api",a=o.create({baseURL:r,headers:{"Content-Type":"application/json"}});a.interceptors.request.use(t=>{const e=localStorage.getItem("token");return e&&(t.headers.Authorization=`Bearer ${e}`),t},t=>Promise.reject(t));const g={get(t,e={}){const n=new URLSearchParams(e).toString(),s=n?`${r}${t}?${n}`:`${r}${t}`;return o.get(s)},getTorrents(t={}){return this.get("/torrents",t)},getTorrent(t){return o.get(`${r}/torrents/${t}`)},getUploadTorrents(){return a.get(`${r}/uploads`)},createTorrent(t){const e=localStorage.getItem("token");return o.post(`${r}/torrents`,t,{headers:{Authorization:`Bearer ${e}`,"Content-Type":"multipart/form-data"}})},updateTorrent(t,e){return o.put(`${r}/torrents/${t}`,e)},saveTorrent(t){return o.post(`${r}/savetorrent`,t)},deleteTorrent(t){return o.post(`${r}/torrents/delete`,{id:t})},login(t){return a.post("/login",{email:t.email,password:t.password}).then(e=>{const n=e.data.token;return localStorage.setItem("token",n),e.data})},logout(){localStorage.removeItem("token"),localStorage.removeItem("user")},getUser(){return JSON.parse(localStorage.getItem("user")||"null")},isLoggedIn(){return!!localStorage.getItem("token")}};export{g as t};
