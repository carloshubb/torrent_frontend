import{a as r,a8 as c,a2 as f}from"#entry";const p="$s";function l(...t){const e=typeof t[t.length-1]=="string"?t.pop():void 0;typeof t[0]!="string"&&t.unshift(e);const[s,o]=t;if(!s||typeof s!="string")throw new TypeError("[nuxt] [useState] key must be a string: "+s);if(o!==void 0&&typeof o!="function")throw new Error("[nuxt] [useState] init must be a function: "+o);const i=p+s,u=r(),n=c(u.payload.state,i);if(n.value===void 0&&o){const a=o();if(f(a))return u.payload.state[i]=a,a;n.value=a}return n}const y=()=>l("user",()=>null),v=()=>l("token",()=>null);function m(){const t=y(),e=v();return{user:t,token:e,isLoggedIn:()=>!!e.value,setAuth:(u,n)=>{t.value=u,e.value=n,localStorage.setItem("user",JSON.stringify(u)),localStorage.setItem("token",n)},logout:()=>{t.value=null,e.value=null,localStorage.removeItem("user"),localStorage.removeItem("token")}}}export{m as u};
