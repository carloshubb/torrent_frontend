{"file":"uploads-C-gAo_5r.js","mappings":"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","names":["_ssrRenderComponent","_push","_parent","icon","_ssrRenderAttr","_ssrInterpolate","_unref","_createVNode","_openBlock","_createBlock","_Fragment","_renderList","_toDisplayString"],"sources":["../../../../../../../pages/uploads.vue"],"sourcesContent":["<script setup>\r\n\r\nimport AppLayout from '~/layouts/AppLayout.vue';\r\nimport dayjs from 'dayjs'\r\nimport relativeTime from 'dayjs/plugin/relativeTime'\r\nimport { defineEmits, ref,reactive } from \"vue\";\r\nimport { PencilIcon, TrashIcon } from '@heroicons/vue/24/solid'\r\nimport torrentService from '~/api/torrentService';\r\nconst showDeleteModal = ref(false);\r\nconst showEditModal = ref(false);\r\nconst itemToDelete = ref(null);\r\nconst currentItem = ref(null);\r\nconst form = reactive({\r\n  name: '',\r\n  description: ''\r\n});\r\ndayjs.extend(relativeTime)\r\nconst uploads = ref([]);\r\nconst parseDateString = (str) => {\r\n    const now = dayjs();\r\n    // If it's ISO string, parse directly\r\n    if (dayjs(str, dayjs.ISO_8601, true).isValid()) {\r\n        return dayjs(str);\r\n    }\r\n    // Remove ordinal suffixes\r\n    str = str.replace(/(\\d+)(st|nd|rd|th)/gi, '$1');\r\n    // Remove apostrophe year and fix\r\n    str = str.replace(/'(\\d{2})/, '20$1');\r\n\r\n    // Remove dots from months\r\n    str = str.replace(/\\./g, '');\r\n\r\n    // If only time is provided, use today\r\n    if (/^\\d{1,2}(:\\d{2})?(am|pm)$/i.test(str)) {\r\n        return dayjs(\r\n            `${now.format(\"YYYY-MM-DD\")} ${str}`,\r\n            [\"YYYY-MM-DD h:mma\", \"YYYY-MM-DD ha\"]\r\n        );\r\n    }\r\n\r\n    // Try multiple formats\r\n    const formats = [\r\n        \"ha MMM D YYYY\",\r\n        \"h:mma MMM D YYYY\",\r\n        \"MMM D YYYY ha\",\r\n        \"MMM D YYYY h:mma\",\r\n        \"MMM D YYYY\" // no time\r\n    ];\r\n\r\n    return dayjs(str, formats);\r\n};\r\n\r\nconst formatApprovedAt = (dateString) => {\r\n    const date = parseDateString(dateString);\r\n    const now = dayjs();\r\n\r\n    if (!date.isValid()) return \"Invalid date\";\r\n\r\n    if (date.isSame(now, 'day')) {\r\n        // Today → show time\r\n        return date.format('h:mma');\r\n    } else {\r\n        // Not today → show only date with year\r\n        return date.format('MMM. D, YYYY');\r\n    }\r\n};\r\nconst emit = defineEmits([\"delete\",'edit']);\r\n\r\n\r\nfunction openEditModal(item) {\r\n  currentItem.value = item; \r\n  form.name = item.name || '';\r\n  form.description = item.detail.description || '';\r\n  showEditModal.value = true;\r\n}\r\nfunction openDeleteModal(item) {\r\n    itemToDelete.value = item;\r\n    showDeleteModal.value = true;\r\n}\r\nfunction closeEditModal() {\r\n  showEditModal.value = false;\r\n  currentItem.value = null;\r\n}\r\n\r\nfunction confirmEdit() {\r\n  // Emit the updated data\r\n  emit('edit', { ...currentItem.value, ...form });\r\n\r\n  // Close modal\r\n  closeEditModal();\r\n}\r\nfunction closeDeleteModal() {\r\n    showDeleteModal.value = false;\r\n    itemToDelete.value = null;\r\n}\r\n\r\nfunction confirmDelete() {\r\n    emit(\"delete\", itemToDelete.value);\r\n    deleteUploadTorrent(itemToDelete.value.id)\r\n    closeDeleteModal();\r\n}\r\n// Delete Torrent\r\nasync function deleteUploadTorrent(id) {\r\n    torrentService.deleteTorrent(id)\r\n        .then(res => {\r\n            uploads.value = uploads.value.filter(function (row) {\r\n                return row.id != id;\r\n            })\r\n        })\r\n        .catch(err => console.error(err));\r\n}\r\n\r\n\r\n\r\nasync function fetchTorrents() {\r\n    try {\r\n        const response = await torrentService.getUploadTorrents();      \r\n        uploads.value =  response.data\r\n        // For demo, assuming all torrents in one group with title \"All Torrents\" \r\n    } catch (error) {\r\n        console.error('Failed to fetch torrents:', error)\r\n    }\r\n\r\n\r\n}\r\n\r\nonMounted(() => {\r\n    fetchTorrents();\r\n});\r\n</script>\r\n\r\n<template>\r\n\r\n    <Head title=\"Your Torrents Uploads\" />\r\n    <AppLayout>\r\n        <div class=\"px-2 md:px-0\">\r\n            <!-- Popular Torrents Section -->\r\n            <div class=\"featured-list bg-gray-800 rounded-lg overflow-hidden shadow-xl mt-6\">\r\n                <div class=\"featured-heading bg-gradient-to-r from-orange-400 to-red-500 px-4 py-3 flex items-center\">\r\n                    <h2 class=\"text-white font-bold\">\r\n                        <span class=\"featured-icon\">\r\n                            <i :class=icon></i>\r\n                        </span>\r\n                        Your Torrents Uploads\r\n                    </h2>\r\n                </div>\r\n\r\n                <div class=\"overflow-x-auto\">\r\n                    <table class=\"min-w-full\">\r\n                        <thead class=\"bg-gray-700\">\r\n                            <tr>\r\n                                <th class=\"text-left px-4 py-1 text-gray-300 font-semibold\">name</th>\r\n                                <th class=\"hidden md:table-cell text-center px-4 py-1 text-gray-300 font-semibold\">se\r\n                                </th>\r\n                                <th class=\"hidden md:table-cell text-center px-4 py-1 text-gray-300 font-semibold\">le\r\n                                </th>\r\n                                <th class=\"hidden md:table-cell text-center px-4 py-1 text-gray-300 font-semibold\">time\r\n                                </th>\r\n                                <th class=\"hidden md:table-cell text-center px-4 py-1 text-gray-300 font-semibold\">remove\r\n                                </th>\r\n                            </tr>\r\n                        </thead>\r\n                        <tbody>\r\n                            <tr  v-if=\"uploads.length > 0\" v-for=\"(torrent, index) in uploads\" :key=\"index\"\r\n                                class=\"border-b border-gray-700 hover:bg-gray-750 transition-colors cursor-pointer text-xs\">\r\n                                <td class=\"px-2 py-3\">\r\n                                    <div class=\"flex items-center justify-between \">\r\n                                        <!-- Left side: icon + name -->\r\n                                        <div class=\"flex items-center\">\r\n                                            <a :href=\"`/sub/${torrent.subcategory_id}/0/`\">\r\n                                                <button class=\"\" v-if=\"torrent.subcategory\"><i\r\n                                                        :class=\"`${torrent.subcategory.icon}`\"></i></button>\r\n                                            </a>\r\n                                            <a :href=\"`/torrent/${torrent.id}/${torrent.slug}/`\"\r\n                                                class=\"text-gray-300 hover:text-orange-400 transition-colors ml-3\">\r\n                                                {{ torrent.name }}\r\n                                            </a>\r\n                                        </div>\r\n\r\n                                        <!-- Right side: badge -->\r\n                                        <span v-if=\"torrent.comments_count\"\r\n                                            class=\"bg-gray-500 text-black-900 rounded text-xs font-semibold px-2\">\r\n                                            {{ torrent.comments_count }}\r\n                                        </span>\r\n                                    </div>\r\n                                </td>\r\n\r\n\r\n\r\n                                <td class=\"text-center px-2 py-2 hidden md:table-cell\">\r\n                                    <span class=\"bg-green-600 text-white px-1 text-xs rounded \">\r\n                                        {{ torrent.seeders }}\r\n                                    </span>\r\n                                </td>\r\n                                <td class=\"text-center px-2 py-2 hidden md:table-cell\">\r\n                                    <span class=\"bg-red-800 text-white px-1 text-xs rounded \">\r\n                                        {{ torrent.leechers }}\r\n                                    </span>\r\n                                </td>\r\n                                <td class=\"text-center px-2 py-2 text-gray-400 hidden md:table-cell\">\r\n                                    {{ formatApprovedAt(torrent.approved_at) }}\r\n                                </td>\r\n                                <td class=\"text-center px-2 py-2 text-gray-400 hidden md:table-cell\">\r\n                                    <button hidden @click=\"openEditModal(torrent)\" class=\"p-2 hover:text-blue-500 transition\" title=\"Edit\">\r\n                                        <PencilIcon class=\"w-5 h-5\" />\r\n                                    </button>\r\n                                    <button @click=\"openDeleteModal(torrent)\" class=\"p-2 hover:text-red-500 transition\"\r\n                                        title=\"Delete\">\r\n                                         <TrashIcon class=\"w-5 h-5\" />\r\n                                    </button>\r\n                                </td>\r\n\r\n                            </tr>\r\n                            <tr v-if=\"uploads.length == 0\">\r\n                            <td colspan=\"6\" class=\"text-center py-4 text-gray-500\">No torrents found</td>\r\n                        </tr>\r\n                        </tbody>\r\n                    </table>\r\n\r\n                </div>\r\n            </div>\r\n        </div>\r\n\r\n        <!-- Modal -->\r\n        <div v-if=\"showDeleteModal\" class=\"fixed inset-0 flex items-center justify-center bg-black bg-opacity-50 z-50\">\r\n            <div class=\"bg-white rounded-2xl shadow-xl p-6 w-full max-w-md\">\r\n                <h2 class=\"text-xl font-semibold text-gray-800 mb-4\">\r\n                    Delete Confirmation\r\n                </h2>\r\n                <p class=\"text-gray-600 mb-6\">\r\n                    Are you sure you want to delete <span class=\"font-bold\">{{ itemToDelete?.name }}</span>?\r\n                    This action cannot be undone.\r\n                </p>\r\n\r\n                <div class=\"flex justify-end space-x-3\">\r\n                    <button  @click=\"closeDeleteModal\"\r\n                        class=\"px-4 py-2 rounded-lg bg-gray-200 hover:bg-gray-300 text-gray-700\">\r\n                        Cancel\r\n                    </button>\r\n                    <button @click=\"confirmDelete\" class=\"px-4 py-2 rounded-lg bg-red-500 hover:bg-red-600 text-white\">\r\n                        Delete\r\n                    </button>\r\n                </div>\r\n            </div>\r\n        </div>\r\n\r\n      \r\n    </AppLayout>\r\n</template>\r\n"],"version":3}