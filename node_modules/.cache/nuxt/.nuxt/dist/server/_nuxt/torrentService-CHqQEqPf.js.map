{"version":3,"file":"torrentService-CHqQEqPf.js","sources":["../../../../../../../api/torrentService.js"],"sourcesContent":["import axios from 'axios';\r\n\r\nconst API_BASE_URL = 'https://api.1331.com.1331x.com/api';  // adjust if needed\r\n// Create an Axios instance\r\nconst api = axios.create({\r\n  baseURL: API_BASE_URL,\r\n  headers: {\r\n    'Content-Type': 'application/json',\r\n  },\r\n});\r\n\r\n// Automatically attach token if it exists in localStorage\r\napi.interceptors.request.use(config => {\r\n  const token = localStorage.getItem('token');\r\n  if (token) {\r\n    config.headers['Authorization'] = `Bearer ${token}`;\r\n  }\r\n  return config;\r\n}, error => Promise.reject(error));\r\nexport default {\r\n  // Generic GET with optional query params object\r\n  get(url, params = {}) {\r\n    const queryString = new URLSearchParams(params).toString();\r\n    const fullUrl = queryString ? `${API_BASE_URL}${url}?${queryString}` : `${API_BASE_URL}${url}`;\r\n    return axios.get(fullUrl);\r\n  },\r\n\r\n  getTorrents(params = {}) {\r\n    return this.get('/torrents', params);\r\n  },\r\n\r\n  getTorrent(id) {\r\n    return axios.get(`${API_BASE_URL}/torrents/${id}`);\r\n  },\r\n\r\n  getUploadTorrents() {\r\n    return  api.get(`${API_BASE_URL}/uploads`);\r\n  },\r\n\r\n  createTorrent(data) {\r\n    const token = localStorage.getItem('token');\r\n    return axios.post(`${API_BASE_URL}/torrents`, data, {\r\n      headers: {\r\n        Authorization: `Bearer ${token}`,\r\n        \"Content-Type\": \"multipart/form-data\", // ✅ let axios handle FormData\r\n      },\r\n    });\r\n  },\r\n\r\n  // Add more API calls here as needed, for example:\r\n  updateTorrent(id, data) {\r\n    return axios.put(`${API_BASE_URL}/torrents/${id}`, data);\r\n  },\r\n\r\n  // Add more API calls here as needed, for example:\r\n  saveTorrent(data) {\r\n    return axios.post(`${API_BASE_URL}/savetorrent`, data);\r\n  },\r\n  // ✅ Delete torrent using POST with ID in body\r\n  deleteTorrent(id) {\r\n    return axios.post(`${API_BASE_URL}/torrents/delete`, { id });\r\n  },\r\n  // Login function\r\n  login(form) {    \r\n    return api.post('/login', {\r\n      email: form.email,\r\n      password: form.password,\r\n    }).then(response => {\r\n      // Save token in localStorage for future requests\r\n      const token = response.data.token;\r\n      localStorage.setItem('token', token);\r\n      return response.data;\r\n    });\r\n  },\r\n  logout() {\r\n    localStorage.removeItem('token');\r\n    localStorage.removeItem('user');\r\n  },\r\n\r\n  getUser() {\r\n    return JSON.parse(localStorage.getItem('user') || 'null');\r\n  },\r\n\r\n  isLoggedIn() {\r\n    return !!localStorage.getItem('token');\r\n  }\r\n};\r\n"],"names":[],"mappings":";AAEA,MAAM,eAAe;AAErB,MAAM,MAAM,MAAM,OAAO;AAAA,EACvB,SAAS;AAAA,EACT,SAAS;AAAA,IACP,gBAAgB;AAAA,EACpB;AACA,CAAC;AAGD,IAAI,aAAa,QAAQ,IAAI,YAAU;AACrC,QAAM,QAAQ,aAAa,QAAQ,OAAO;AAC1C,MAAI,OAAO;AACT,WAAO,QAAQ,eAAe,IAAI,UAAU,KAAK;AAAA,EACnD;AACA,SAAO;AACT,GAAG,WAAS,QAAQ,OAAO,KAAK,CAAC;AACjC,MAAA,iBAAe;AAAA;AAAA,EAEb,IAAI,KAAK,SAAS,IAAI;AACpB,UAAM,cAAc,IAAI,gBAAgB,MAAM,EAAE,SAAQ;AACxD,UAAM,UAAU,cAAc,GAAG,YAAY,GAAG,GAAG,IAAI,WAAW,KAAK,GAAG,YAAY,GAAG,GAAG;AAC5F,WAAO,MAAM,IAAI,OAAO;AAAA,EAC1B;AAAA,EAEA,YAAY,SAAS,IAAI;AACvB,WAAO,KAAK,IAAI,aAAa,MAAM;AAAA,EACrC;AAAA,EAEA,WAAW,IAAI;AACb,WAAO,MAAM,IAAI,GAAG,YAAY,aAAa,EAAE,EAAE;AAAA,EACnD;AAAA,EAEA,oBAAoB;AAClB,WAAQ,IAAI,IAAI,GAAG,YAAY,UAAU;AAAA,EAC3C;AAAA,EAEA,cAAc,MAAM;AAClB,UAAM,QAAQ,aAAa,QAAQ,OAAO;AAC1C,WAAO,MAAM,KAAK,GAAG,YAAY,aAAa,MAAM;AAAA,MAClD,SAAS;AAAA,QACP,eAAe,UAAU,KAAK;AAAA,QAC9B,gBAAgB;AAAA;AAAA,MACxB;AAAA,IACA,CAAK;AAAA,EACH;AAAA;AAAA,EAGA,cAAc,IAAI,MAAM;AACtB,WAAO,MAAM,IAAI,GAAG,YAAY,aAAa,EAAE,IAAI,IAAI;AAAA,EACzD;AAAA;AAAA,EAGA,YAAY,MAAM;AAChB,WAAO,MAAM,KAAK,GAAG,YAAY,gBAAgB,IAAI;AAAA,EACvD;AAAA;AAAA,EAEA,cAAc,IAAI;AAChB,WAAO,MAAM,KAAK,GAAG,YAAY,oBAAoB,EAAE,GAAE,CAAE;AAAA,EAC7D;AAAA;AAAA,EAEA,MAAM,MAAM;AACV,WAAO,IAAI,KAAK,UAAU;AAAA,MACxB,OAAO,KAAK;AAAA,MACZ,UAAU,KAAK;AAAA,IACrB,CAAK,EAAE,KAAK,cAAY;AAElB,YAAM,QAAQ,SAAS,KAAK;AAC5B,mBAAa,QAAQ,SAAS,KAAK;AACnC,aAAO,SAAS;AAAA,IAClB,CAAC;AAAA,EACH;AAAA,EACA,SAAS;AACP,iBAAa,WAAW,OAAO;AAC/B,iBAAa,WAAW,MAAM;AAAA,EAChC;AAAA,EAEA,UAAU;AACR,WAAO,KAAK,MAAM,aAAa,QAAQ,MAAM,KAAK,MAAM;AAAA,EAC1D;AAAA,EAEA,aAAa;AACX,WAAO,CAAC,CAAC,aAAa,QAAQ,OAAO;AAAA,EACvC;AACF;"}