{"version":3,"file":"TorrentPagination-DsBJutVk.js","sources":["../../../../../../../components/TorrentPagination.vue"],"sourcesContent":["<template>\n  <div class=\"flex justify-center mt-4 space-x-2\">\n    <button :disabled=\"currentPage === 1\" @click=\"changePage(currentPage - 1)\"\n      class=\"px-3 py-1 rounded bg-gray-700 text-white disabled:opacity-50\">\n      Prev\n    </button>\n\n    <a v-for=\"page in pages\" :key=\"page.key\" @click=\"changePage(page.number)\" :disabled=\"page.isEllipsis\"\n      :href=\"page.isEllipsis ? 'javascript:void(0)' : generateHref(page.number)\" :class=\"[\n        'px-3 py-1 rounded',\n        page.number === currentPage ? 'bg-orange-500 text-white' : 'bg-gray-700 text-gray-300 hover:bg-gray-600',\n        page.isEllipsis ? 'cursor-default' : 'cursor-pointer'\n      ]\">\n      {{ page.display }}\n    </a>\n\n    <button :disabled=\"currentPage === lastPage\" @click=\"changePage(currentPage + 1)\"\n      class=\"px-3 py-1 rounded bg-gray-700 text-white disabled:opacity-50\">\n      Next\n    </button>\n  </div>\n</template>\n\n<script>\nimport { useRouter } from 'vue-router'\nconst router = useRouter()\nexport default {\n  name: 'TorrentPagination',\n  props: {\n    currentPage: {\n      type: Number,\n      required: true\n    },\n    lastPage: {\n      type: Number,\n      required: true\n    }\n  },\n  computed: {\n    pages() {\n      const pages = []\n      const total = this.lastPage\n      const current = this.currentPage\n      // Helper to add page object\n      const addPage = (number, display = null, isEllipsis = false) => {\n        pages.push({\n          key: isEllipsis ? `ellipsis-${pages.length}` : `page-${number}`,\n          number,\n          display: display || number,\n          isEllipsis\n        })\n      }\n\n      if (total <= 5) {\n        // Just add all pages\n        for (let i = 1; i <= total; i++) {\n          addPage(i)\n        }\n      } else {\n        // More than 5 pages: add first page\n        addPage(1)\n\n        // Decide where to add ellipsis / pages\n        if (current > 3) {\n          addPage(null, '...', true) // left ellipsis\n        }\n\n        // Calculate start and end for middle pages (around current page)\n        let start = Math.max(2, current - 1)\n        let end = Math.min(total - 1, current + 1)\n\n        // Adjust start or end if near beginning or end\n        if (current <= 3) {\n          start = 2\n          end = 4\n        } else if (current >= total - 2) {\n          start = total - 3\n          end = total - 1\n        }\n\n        for (let i = start; i <= end; i++) {\n          addPage(i)\n        }\n\n        if (current < total - 2) {\n          addPage(null, '...', true) // right ellipsis\n        }\n\n        // Add last page\n        addPage(total)\n      }\n\n      return pages\n    }\n  },\n  methods: {\n    changePage(page) {\n      if (!page) return\n      if (page >= 1 && page <= this.lastPage && page !== this.currentPage) {\n        this.$emit('page-changed', page)\n        const next_url = this.generateHref(page);\n        router.push(next_url);\n      }\n    },\n    generateHref(page) {\n      let urlParts = []\n      if (process.client) {\n        urlParts = window.location.pathname.split('/').filter(Boolean)\n      }\n      // filter(Boolean) removes empty strings from leading/trailing slashes\n\n      let page_url = '/'; // default fallback\n\n      if (urlParts.length > 0 && urlParts[0] != 'library') {\n        page_url = `/${urlParts[0]}/${urlParts[1]}/${page}/`;\n      } else if (urlParts.length > 0 && urlParts[0] == 'library') {\n        page_url = `/${urlParts[0]}/${page}/`;\n      }\n      else {\n        page_url = `/`;\n      }\n\n      return page_url;\n    }\n  }\n}\n</script>\n\n<style scoped>\nbutton {\n  transition: background-color 0.2s ease;\n}\n\nbutton:disabled {\n  cursor: not-allowed;\n}\n</style>\n"],"names":["_ssrRenderAttrs","_mergeProps","_ssrRenderList","_ssrIncludeBooleanAttr","_ssrInterpolate"],"mappings":";;;;AAyBA,MAAM,SAAS,UAAA;AACf,MAAK,YAAU;AAAA,EACb,MAAM;AAAA,EACN,OAAO;AAAA,IACL,aAAa;AAAA,MACX,MAAM;AAAA,MACN,UAAU;AAAA,IAAA;AAAA,IAEZ,UAAU;AAAA,MACR,MAAM;AAAA,MACN,UAAU;AAAA,IAAA;AAAA,EACZ;AAAA,EAEF,UAAU;AAAA,IACR,QAAQ;AACN,YAAM,QAAQ,CAAA;AACd,YAAM,QAAQ,KAAK;AACnB,YAAM,UAAU,KAAK;AAErB,YAAM,UAAU,CAAC,QAAQ,UAAU,MAAM,aAAa,UAAU;AAC9D,cAAM,KAAK;AAAA,UACT,KAAK,aAAa,YAAY,MAAM,MAAM,KAAK,QAAQ,MAAM;AAAA,UAC7D;AAAA,UACA,SAAS,WAAW;AAAA,UACpB;AAAA,QAAA,CACD;AAAA,MACH;AAEA,UAAI,SAAS,GAAG;AAEd,iBAAS,IAAI,GAAG,KAAK,OAAO,KAAK;AAC/B,kBAAQ,CAAC;AAAA,QACX;AAAA,MACF,OAAO;AAEL,gBAAQ,CAAC;AAGT,YAAI,UAAU,GAAG;AACf,kBAAQ,MAAM,OAAO,IAAI;AAAA,QAC3B;AAGA,YAAI,QAAQ,KAAK,IAAI,GAAG,UAAU,CAAC;AACnC,YAAI,MAAM,KAAK,IAAI,QAAQ,GAAG,UAAU,CAAC;AAGzC,YAAI,WAAW,GAAG;AAChB,kBAAQ;AACR,gBAAM;AAAA,QACR,WAAW,WAAW,QAAQ,GAAG;AAC/B,kBAAQ,QAAQ;AAChB,gBAAM,QAAQ;AAAA,QAChB;AAEA,iBAAS,IAAI,OAAO,KAAK,KAAK,KAAK;AACjC,kBAAQ,CAAC;AAAA,QACX;AAEA,YAAI,UAAU,QAAQ,GAAG;AACvB,kBAAQ,MAAM,OAAO,IAAI;AAAA,QAC3B;AAGA,gBAAQ,KAAK;AAAA,MACf;AAEA,aAAO;AAAA,IACT;AAAA,EAAA;AAAA,EAEF,SAAS;AAAA,IACP,WAAW,MAAM;AACf,UAAI,CAAC,KAAM;AACX,UAAI,QAAQ,KAAK,QAAQ,KAAK,YAAY,SAAS,KAAK,aAAa;AACnE,aAAK,MAAM,gBAAgB,IAAI;AAC/B,cAAM,WAAW,KAAK,aAAa,IAAI;AACvC,eAAO,KAAK,QAAQ;AAAA,MACtB;AAAA,IACF;AAAA,IACA,aAAa,MAAM;AACjB,UAAI,WAAW,CAAA;AAMf,UAAI,WAAW;AAEf,UAAI,SAAS,SAAS,KAAK,SAAS,CAAC,KAAK,WAAW;AACnD,mBAAW,IAAI,SAAS,CAAC,CAAC,IAAI,SAAS,CAAC,CAAC,IAAI,IAAI;AAAA,MACnD,OAGK;AACH,mBAAW;AAAA,MACb;AAEA,aAAO;AAAA,IACT;AAAA,EAAA;AAEJ;;eA5HOA,eAAAC,WAAA,EAAA,OAAM,qCAAA,GAAoC,MAAA,CAAA,kDAC1B,OAAA,gBAAW,CAAA,IAAA,cAAA;AAKZC,gBAAA,SAAA,QAAR,SAAI;eAAuEC,sBAAA,KAAK,UAAU,IAAA,cAAA,mBACjG,QAAM,KAAK,oCAAoC,SAAA,aAAa,KAAK,MAAM,CAAA;;MAAkD,KAAK,WAAW,OAAA,cAAW,6BAAA;AAAA,MAAuF,KAAK,aAAU,mBAAA;AAAA,IAAA,uBAKxPC,eAAA,KAAK,OAAO;;AAGE,QAAA,kBAAAD,sBAAA,OAAA,gBAAgB,OAAA,QAAQ,IAAA,cAAA,EAAA,6GAAA;;;;;;;;;"}